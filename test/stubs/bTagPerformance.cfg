process Demo =  {
###########################################################
# This studies the performance of the b tag used at HLT.  #
#                                                         #
# Be careful to edit in two places below whether you wish #
# to study the pixel-only or regional tracking b tag.     #
###########################################################

  #keep the logging output to a nice level
  include "FWCore/MessageLogger/data/MessageLogger.cfi"

  source = PoolSource {
     include "HLTrigger/btau/test/data_ttbar.cff"

     untracked int32  maxEvents     = 10
  }

  include "RecoBTag/Analysis/data/bTagTrackCountingAnalysis.cfi"
  replace bTagTrackCountingAnalysis.produceEps = true
  replace bTagTrackCountingAnalysis.producePs = false

########################################################
# Pixel-based b tag used at Level 2.5.
#  replace bTagTrackCountingAnalysis.moduleLabel = "trackCountingJetTagsL25"

# Regional tracking based b tag used at Level 3.
replace bTagTrackCountingAnalysis.moduleLabel = "trackCountingJetTagsL3"
##########################################################

# Do reconstruction of pixel or regional tracks, followed by b tagging.

    include "Configuration/StandardSequences/data/FakeConditions.cff"
#    include "HLTrigger/Configuration/data/common/HLTSetupFromDigis.cff"
    include "HLTrigger/btau/data/jetTag/lifetimeHLT.cff"
# Use all input jets.
    replace lifetimeHighestEtJets.maxNumber = 10
    replace lifetimeEtCutJets.etMin = 20.

##############################################################
# Use this reconstruction for L2.5 b tagging studies.
# Pixel-based b tag used at Level 2.5.
# sequence bReco = {preL2bReco, preL25bReco}
# Regional tracking based b tag used at Level 3.
sequence bReco = {preL2bReco, preL25bReco, preL3bReco}

# Use this reconstruction for L3 b tagging studies.
# Run L3 b tag on input jets, not on L2.5 jets.
replace fromL25bJets= EtMinCaloJetShallowCloneSelector {
    InputTag src = lifetimeHighestEtJets 
    bool filter = false
    double etMin = 20.0  # And require jet Et greater than cut.
}
###############################################################
 
  path p = { bReco, bTagTrackCountingAnalysis} 
}
