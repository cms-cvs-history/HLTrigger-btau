#! /bin/env cmsRun

process HLT = {
    # include services
    include "Configuration/ReleaseValidation/data/Services.cfi"
    
    # initialize MessageLogger
    include "FWCore/MessageLogger/data/MessageLogger.cfi"
    
    #service = Tracer { untracked string indention = "$$"}	
    service = RandomNumberGeneratorService {
	untracked uint32 sourceSeed = 98765
    }
    
    untracked PSet options = {
	untracked bool makeTriggerResults = true
        #vstring listOfTriggers = { "doubleTrkTauTrg" }
        #vstring listOfTriggers = {}
	untracked bool wantSummary = true  # default is false
    }
    source = PoolSource {
        untracked vstring fileNames = {
            'rfio:/castor/cern.ch/user/g/gennai/CMSSW_1_3_1/Z2Tau/L1TauFiltered_Z2Tau_30.root',
            'rfio:/castor/cern.ch/user/g/gennai/CMSSW_1_3_1/Z2Tau/L1TauFiltered_Z2Tau_31.root',
            'rfio:/castor/cern.ch/user/g/gennai/CMSSW_1_3_1/Z2Tau/L1TauFiltered_Z2Tau_32.root'
	    

        }
		untracked int32 maxEvents = -1
    }
    
    module CaloTauHLT = PoolOutputModule {
	untracked string fileName = 'rfio:/castor/cern.ch/user/g/gennai/hlt_Z2Tau_noFilters_mctruth_5.root'
#	untracked string fileName = 'file:/tmp/gennai/hlt_Z2Tau_noFilters_mctruth.root'
	untracked vstring outputCommands = {
	    "keep *"
	}
    } 


    include "L1Trigger/L1ExtraFromDigis/data/l1extra.cff"
    replace l1extraParticleMap.A_DoubleTauJet30_prescale =1
    replace l1extraParticleMap.A_SingleTauJet100_thresh =50

    include "HLTrigger/btau/data/tau/TauHLT.cff"
    replace hlt1METSingleTau.MinPt = 70.0
    replace isolatedL25SingleTau.MinimumTransverseMomentumLeadingTrack = 1.
    replace isolatedL25SingleTau.SignalCone = 0.45
    replace isolatedL25SingleTau.MatchingCone = 0.45
    replace isolatedL25DoubleTau.MinimumTransverseMomentumLeadingTrack = 1.
    replace isolatedL25DoubleTau.SignalCone = 0.45
    replace isolatedL25DoubleTau.MatchingCone = 0.45
    replace l2TauJetsProvider.EtExtraTau = 20.
replace doubleTauL1SeedFilter.L1Seeds = {"A_DoubleTauJet30"}


    path l1Emulator      = {l1emulator, l1extra }	
#    path singleTauTrg    = {singleTauL1NoHLT}
    path doubleTrkTauTrg = {caloSiStripTauL1NoHLT }
#    path caloPixelTauTrg = {caloPixelTauL1NoHLT }

    endpath outpath = { CaloTauHLT }

}
