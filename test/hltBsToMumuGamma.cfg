process HLTBToJpsi = {

#-----------------Input file------------------
	source = PoolSource {
		untracked vstring fileNames = {
		"castor:/castor/cern.ch/user/a/anayak/bsmmg/sim_bsmmg1.root",
                "castor:/castor/cern.ch/user/a/anayak/bsmmg/sim_bsmmg2.root"
		}
	
		untracked int32 maxEvents = 30
	}

#---------------Debug choices-----------------------------
	# include services
	#include "Configuration/ReleaseValidation/data/Services.cfi"
	
	# initialize MessageLogger
	include "FWCore/MessageLogger/data/MessageLogger.cfi"
	
#--------make digi--- use sequence "pdigi"
#        include "Configuration/StandardSequences/data/Simulation.cff"
#	include "Configuration/ReleaseValidation/data/mix.cfi"
#	include "Configuration/StandardSequences/data/FakeConditions.cff"

  include "Geometry/CMSCommonData/data/cmsMagneticFieldXML.cfi"
  include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"
  include "Configuration/ReleaseValidation/data/mix.cfi"
  include "SimGeneral/TrackingAnalysis/data/trackingtruth.cfi"
  include "Configuration/StandardSequences/data/Digi.cff"
  include "Configuration/StandardSequences/data/FakeConditions.cff"     
# To switch misalignment on (need to comment FakeConditions.cff)
#include "Configuration/StandardSequences/data/Frontier10pbConditions.cff"

# Initialize magnetic field and XML
  include "Geometry/CMSCommonData/data/cmsIdealGeometryXML.cfi"
  include "Geometry/CaloEventSetup/data/CaloGeometry.cfi"
 path pdigi = {mix,doAllDigi,trackingtruth}
#----------------HLT B to J/Psi Path-------------

#	include "HLTrigger/btau/data/displacedmumu/PathBToJpsiToMumu.cff"
        include "HLTrigger/btau/data/displacedmumu/PathBsToMuMuGamma.cff"
// 	path pbjpsi = {doL1TfromDigis & hltDiMuonLevel1Seed & pixeltrackerlocalreco & recopixelvertexing & muonCandidateFromHLTFOWR & trackerlocalreco & jpsitracks & jpsicand & displacedmumuFilter}
	path pbtoJpsitoMumu = {btoJpsitoMumu}
	

#---------------Timing-----------------------------
	// subroutine-by-subroutine timing info (optional)
//   service = SimpleProfiling {}
// 	service = Timing { }
	module glob = HLTMakeSummaryObjects { }

	
		// Want trigger table summary in log file & results object
		// with specified triggers

	untracked PSet options = {
		untracked bool wantSummary = true  # default is false
		untracked bool makeTriggerResults = true 
         vstring listOfTriggers = {"pbtoJpsitoMumu" } 
	}


	// Writing out the data structures
#---------------------output--------------------------
	module out = PoolOutputModule {
		untracked string fileName = "castor:/castor/cern.ch/user/a/anayak/bsmmg/BsHLTtest4.root"
// 		untracked PSet SelectEvents = {
// 			vstring SelectEvents = { "pbtoJpsitoMumu" }
// 		}
	}
	
	schedule = { pdigi, pbtoJpsitoMumu, outpath}
	endpath outpath = {glob, out}

}
